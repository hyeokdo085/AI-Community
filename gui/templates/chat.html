{% extends "layout.html" %}

{% block content %}
<section class="chat">
    <aside class="chat__sidebar">
        <h2>ğŸ‘¤ í˜„ì¬ ê³„ì •</h2>
        <p>{{ user.email }}</p>
        
        <div style="margin: 2rem 0; padding: 1rem; background: var(--bg-input); border-radius: var(--radius-md); border: 2px solid var(--border-secondary);">
            <h3 style="color: var(--secondary); font-size: 0.9rem; margin: 0 0 0.75rem; text-transform: uppercase; letter-spacing: 0.1em;">âš¡ ë‹¨ì¶•í‚¤</h3>
            <div style="color: var(--text-muted); font-size: 0.85rem; line-height: 2;">
                <div><kbd style="background: var(--bg-dark); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--primary); border: 1px solid var(--border);">Alt + T</kbd> í…Œë§ˆ ì „í™˜</div>
                <div><kbd style="background: var(--bg-dark); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--primary); border: 1px solid var(--border);">Alt + R</kbd> ìƒˆë¡œê³ ì¹¨</div>
                <div><kbd style="background: var(--bg-dark); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--primary); border: 1px solid var(--border);">Shift + Enter</kbd> ì¤„ë°”ê¿ˆ</div>
                <div><kbd style="background: var(--bg-dark); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--primary); border: 1px solid var(--border);">Enter</kbd> ì „ì†¡</div>
            </div>
        </div>
        
        <button id="refresh-history" type="button">ğŸ”„ ê¸°ë¡ ìƒˆë¡œê³ ì¹¨</button>
        
        <div style="margin-top: 2rem; padding: 1rem; background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), rgba(255, 0, 255, 0.1)); border-radius: var(--radius-md); border: 2px solid var(--border);">
            <h3 style="color: var(--primary); font-size: 0.9rem; margin: 0 0 0.75rem; text-transform: uppercase; letter-spacing: 0.1em;">ğŸ¤– AI ì •ë³´</h3>
            <div style="color: var(--text-muted); font-size: 0.85rem; line-height: 1.8;">
                <div style="margin-bottom: 0.5rem;">
                    <strong style="color: var(--text-secondary);">ëª¨ë¸:</strong>
                    <span style="color: var(--text-primary);">Gemini 2.0 Flash</span>
                </div>
                <div style="margin-bottom: 0.5rem;">
                    <strong style="color: var(--text-secondary);">ì–¸ì–´:</strong>
                    <span style="color: var(--text-primary);">í•œêµ­ì–´</span>
                </div>
                <div>
                    <strong style="color: var(--text-secondary);">ìƒíƒœ:</strong>
                    <span style="color: var(--success);">â— ì˜¨ë¼ì¸</span>
                </div>
            </div>
        </div>
    </aside>
    
    <div class="chat__body">
        <div id="chat-log" class="chat__log" aria-live="polite" role="log"></div>
        <form id="chat-form" class="chat__form">
            <textarea 
                name="message" 
                rows="3" 
                placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”... (Shift+Enterë¡œ ì¤„ë°”ê¿ˆ, Enterë¡œ ì „ì†¡)" 
                required
                aria-label="ë©”ì‹œì§€ ì…ë ¥"
            ></textarea>
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                <label class="inline">
                    <input type="checkbox" name="ask_ai" checked>
                    <span style="font-size: 1rem; font-weight: 600;">ğŸ¤– AI ì‘ë‹µ ë°›ê¸°</span>
                </label>
                <button type="submit">ì „ì†¡ âœˆï¸</button>
            </div>
        </form>
    </div>
</section>
<script>
    window.__AI_COMMUNITY_USER__ = {{ user|tojson }};
</script>
{% endblock %}
